//=================================================================================
// UDPSocket.hpp
// Author: Tyler George
// Date  : January 25, 2016
//=================================================================================
#pragma once

#ifndef __included_UDPSocket__
#define __included_UDPSocket__

///---------------------------------------------------------------------------------
/// Includes
///---------------------------------------------------------------------------------
class NetworkPacketQueue;
class SocketThread;
class NetworkAddress;

///---------------------------------------------------------------------------------
///
///---------------------------------------------------------------------------------
class UDPSocket
{
public:
    ///---------------------------------------------------------------------------------
    /// Constructors/Destructors
    ///---------------------------------------------------------------------------------
    UDPSocket( NetworkPacketQueue* queue, short port );
    ~UDPSocket();

    ///---------------------------------------------------------------------------------
    /// Accessors/Queries
    ///---------------------------------------------------------------------------------
    inline bool IsRunning() const { return m_running; }
    NetworkAddress& GetAddress() { return *m_boundAddress; }

    ///---------------------------------------------------------------------------------
    /// Mutators
    ///---------------------------------------------------------------------------------
    void SetAddress( NetworkAddress* address ) { m_boundAddress = address; }
    void Close() { m_running = false; }
    void Join();

private:
    ///---------------------------------------------------------------------------------
    /// Private member variables
    ///---------------------------------------------------------------------------------
    bool m_running;
    SocketThread* m_serviceThread;
    NetworkAddress* m_boundAddress;


};

#endif