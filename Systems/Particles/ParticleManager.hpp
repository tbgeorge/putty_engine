//=================================================================================
// ParticleManager.hpp
// Author: Tyler George
// Date  : June 12, 2015
//=================================================================================

#pragma once

#ifndef __included_ParticleManager__
#define __included_ParticleManager__

///---------------------------------------------------------------------------------
/// Includes
///---------------------------------------------------------------------------------
#include "Engine/Common/EngineCommon.hpp"
#include "Engine/Math/StateVectors.hpp"
#include "Engine/Systems/Particles/Particle.hpp"

///---------------------------------------------------------------------------------
/// Typedefs
///---------------------------------------------------------------------------------

///---------------------------------------------------------------------------------
///
///---------------------------------------------------------------------------------
class ParticleManager
{

public:
	///---------------------------------------------------------------------------------
	/// Constructors/Destructors
	///---------------------------------------------------------------------------------
    ParticleManager( const unsigned int& numParticles );
    ~ParticleManager();

	///---------------------------------------------------------------------------------
	/// Initialization
	///---------------------------------------------------------------------------------
	
	///---------------------------------------------------------------------------------
	/// Accessors/Queries
	///---------------------------------------------------------------------------------
    unsigned int Size() { return m_size; }

    Particle* GetFirst();
    Particle* GetLast();
    Particle* GetFirstInactive();
    Particle* GetLastActive();

	///---------------------------------------------------------------------------------
	/// Mutators
	///---------------------------------------------------------------------------------
    void AddParticle();
    bool ActivateParticle( const Vector3& pos, const Vector3& vel, const float& mass, const double& lifeTime );
    Particle* DeactivateParticle( Particle* particle );

	///---------------------------------------------------------------------------------
	/// Update
	///---------------------------------------------------------------------------------
    void UpdateActiveParticles( const double& deltaSeconds );

	///---------------------------------------------------------------------------------
	/// Render
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Public Member Variables
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Static Variables
	///---------------------------------------------------------------------------------


private:
	///---------------------------------------------------------------------------------
	/// Private Functions
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Private Member Variables
	///---------------------------------------------------------------------------------
    Particle* m_first;
    Particle* m_firstInactive;
    Particle* m_lastActive;
    Particle* m_last;


    unsigned int m_size;
};

///---------------------------------------------------------------------------------
/// Inline function implementations
///---------------------------------------------------------------------------------

#endif