//=================================================================================
// MeshRenderer.hpp
// Author: Tyler George
// Date  : June 29, 2015
//=================================================================================

#pragma once

#ifndef __included_MeshRenderer__
#define __included_MeshRenderer__

///---------------------------------------------------------------------------------
/// Includes
///---------------------------------------------------------------------------------
#include "Engine/Common/EngineCommon.hpp"
#include "Engine/Renderer/PuttyMesh.hpp"
#include "Engine/Renderer/Material.hpp"
#include "Engine/Renderer/Lighting/PuttyLight.hpp"

///---------------------------------------------------------------------------------
/// Typedefs
///---------------------------------------------------------------------------------

///---------------------------------------------------------------------------------
///
///---------------------------------------------------------------------------------
class MeshRenderer
{
public:
	///---------------------------------------------------------------------------------
	/// Constructors/Destructors
	///---------------------------------------------------------------------------------
    MeshRenderer( OpenGLRenderer* renderer );
    ~MeshRenderer();

	///---------------------------------------------------------------------------------
	/// Initialization
	///---------------------------------------------------------------------------------
	
	///---------------------------------------------------------------------------------
	/// Accessors/Queries
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Mutators
	///---------------------------------------------------------------------------------
    void SetMesh( PuttyMesh* mesh );
    void SetMaterial( Material* material, bool bindLights );

	///---------------------------------------------------------------------------------
	/// Update
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Render
	///---------------------------------------------------------------------------------
    void Render( const Matrix4f& model, const Matrix4f& view, const Matrix4f& proj, const Lights& lights );
    void Render( const Matrix4f& model, const Matrix4f& view, const Matrix4f& proj );

	///---------------------------------------------------------------------------------
	/// Public Member Variables
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Static Variables
	///---------------------------------------------------------------------------------


private:
	///---------------------------------------------------------------------------------
	/// Private Functions
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Private Member Variables
	///---------------------------------------------------------------------------------
    OpenGLRenderer* m_renderer;
    PuttyMesh* m_mesh;
    Material* m_material;
    unsigned int m_vaoID;

    bool m_bindLights;
};

///---------------------------------------------------------------------------------
/// Inline function implementations
///---------------------------------------------------------------------------------

#endif